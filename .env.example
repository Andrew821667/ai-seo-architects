# =============================================================================
# AI SEO Architects - Production Environment Configuration
# =============================================================================
# Скопируйте этот файл в .env и заполните своими значениями
# Для production развертывания обязательно измените все пароли и ключи!

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================

# Environment Configuration
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
API_HOST=0.0.0.0
API_PORT=8000

# Application Metadata
APP_NAME=AI SEO Architects
APP_VERSION=1.0.0
APP_DESCRIPTION=Enterprise Multi-Agent SEO Automation System

# =============================================================================
# AI MODELS CONFIGURATION (КРИТИЧНО)
# =============================================================================

# OpenAI Configuration (ОБЯЗАТЕЛЬНО)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL_PRIMARY=gpt-4o          # Executive уровень
OPENAI_MODEL_SECONDARY=gpt-4o-mini   # Management/Operational уровень
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_TEMPERATURE=0.1
OPENAI_MAX_TOKENS=4000

# Anthropic Configuration (для MCP интеграции)
ANTHROPIC_API_KEY=your-anthropic-api-key-optional

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL + Redis)
# =============================================================================

# PostgreSQL Primary Database
DATABASE_URL=postgresql+asyncpg://ai_seo_user:CHANGE_DB_PASSWORD@postgres:5432/ai_seo_architects
POSTGRES_DB=ai_seo_architects
POSTGRES_USER=ai_seo_user  
POSTGRES_PASSWORD=CHANGE_DB_PASSWORD_TO_SECURE_ONE

# Database Performance Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis Cache & Sessions
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# SECURITY CONFIGURATION (КРИТИЧНО)
# =============================================================================

# JWT Authentication Security
JWT_SECRET_KEY=CHANGE_THIS_TO_CRYPTOGRAPHICALLY_SECURE_KEY_AT_LEAST_64_CHARS
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Default Admin Account (СМЕНИТЬ НЕМЕДЛЕННО!)
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
DEFAULT_ADMIN_EMAIL=admin@yourdomain.com

# =============================================================================
# CORS & NETWORK CONFIGURATION
# =============================================================================

# CORS Settings (настройте под ваши frontend домены)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://yourdomain.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Network & Performance
MAX_REQUEST_SIZE=20971520  # 20MB
MAX_UPLOAD_SIZE=10485760   # 10MB
REQUEST_TIMEOUT_SECONDS=300

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================

# Rate Limiting by Role (requests per hour)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_ADMIN=1000      # Admin пользователи
RATE_LIMIT_MANAGER=500     # Manager пользователи  
RATE_LIMIT_OPERATOR=200    # Operator пользователи
RATE_LIMIT_ANONYMOUS=50    # Неавторизованные

# Input Validation & Security
VALIDATION_ENABLED=true
VALIDATION_STRICT_MODE=true
HTML_SANITIZATION_ENABLED=true
SQL_INJECTION_PROTECTION=true

# Session Management
SESSION_TIMEOUT_MINUTES=120
MAX_CONCURRENT_SESSIONS=5
SESSION_CLEANUP_INTERVAL=3600

# =============================================================================
# RAG & VECTOR STORE CONFIGURATION
# =============================================================================

# FAISS Vector Store Settings
VECTOR_STORE_PATH=./data/vector_stores
FAISS_INDEX_TYPE=IVF1024,Flat
VECTOR_DIMENSION=1536

# Knowledge Base Management
KNOWLEDGE_BASE_PATH=./knowledge
KNOWLEDGE_CHUNK_SIZE=1000
KNOWLEDGE_CHUNK_OVERLAP=200
KNOWLEDGE_SIMILARITY_THRESHOLD=0.7
KNOWLEDGE_MAX_RESULTS=10

# Embedding Configuration
EMBEDDING_BATCH_SIZE=100
EMBEDDING_CACHE_TTL=86400  # 24 часа

# =============================================================================
# MCP (MODEL CONTEXT PROTOCOL) SETTINGS
# =============================================================================

# MCP Feature Control
MCP_ENABLED=true
MCP_CACHE_TTL_MINUTES=30
MCP_TIMEOUT_SECONDS=30
MCP_ENABLE_FALLBACK=true
MCP_MAX_RETRIES=3

# MCP Server Priorities (1-10, выше = предпочтительнее)
MCP_ANTHROPIC_PRIORITY=10
MCP_OPENAI_PRIORITY=8
MCP_GOOGLE_PRIORITY=6

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus Metrics Collection
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_UPDATE_INTERVAL_SECONDS=30
METRICS_RETENTION_DAYS=90

# Grafana Configuration
GRAFANA_PASSWORD=CHANGE_GRAFANA_PASSWORD
GRAFANA_PORT=3000
GRAFANA_ENABLE_ALERTING=true

# Logging Configuration
LOG_FORMAT=json
LOG_FILE_PATH=./logs/api.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10
LOG_ROTATION_DAILY=true

# Health Monitoring
HEALTH_CHECK_INTERVAL_SECONDS=30
STARTUP_TIMEOUT_SECONDS=120
READINESS_TIMEOUT_SECONDS=60

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket Settings
WEBSOCKET_ENABLED=true
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_CONNECTION_TIMEOUT=60
WEBSOCKET_MAX_CONNECTIONS_PER_IP=5
WEBSOCKET_BUFFER_SIZE=1024

# Real-time Dashboard Updates
DASHBOARD_UPDATE_INTERVAL=10
DASHBOARD_METRICS_BUFFER=100

# =============================================================================
# BACKGROUND TASKS & PERFORMANCE
# =============================================================================

# Task Queue Configuration
TASK_QUEUE_SIZE=1000
MAX_CONCURRENT_TASKS=20
TASK_TIMEOUT_SECONDS=600
TASK_RETRY_ATTEMPTS=3

# Agent Performance Settings
AGENT_RESPONSE_TIMEOUT=120
AGENT_MAX_CONCURRENT_REQUESTS=10
AGENT_MEMORY_LIMIT_MB=512

# Cache Configuration
CACHE_DEFAULT_TTL=3600      # 1 час
CACHE_MAX_SIZE=1000
CACHE_EVICTION_POLICY=LRU

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# ChromaDB Vector Database (опционально)
CHROMA_HOST=chroma
CHROMA_PORT=8000
CHROMA_ENABLED=false
CHROMA_PERSIST_DIRECTORY=./data/chroma_db

# Email Notifications (для alerting)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@yourdomain.com
EMAIL_NOTIFICATIONS_ENABLED=false

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Database Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *   # Ежедневно в 2:00
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups
BACKUP_COMPRESSION=gzip

# Maintenance Windows
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_MESSAGE="System maintenance in progress. Please try again later."

# =============================================================================
# FEATURE FLAGS & TOGGLES
# =============================================================================

# Core Features
ENABLE_ANALYTICS=true
ENABLE_REAL_TIME_DASHBOARD=true
ENABLE_AGENT_METRICS=true
ENABLE_PERFORMANCE_TRACKING=true

# API Features
ENABLE_API_DOCS=true         # Отключить в production для безопасности
ENABLE_DEBUG_ENDPOINTS=false # НИКОГДА не включать в production
ENABLE_MOCK_DATA=false       # Только для development

# Advanced Features
ENABLE_CACHING=true
ENABLE_COMPRESSION=true
ENABLE_REQUEST_LOGGING=true

# =============================================================================
# SSL/TLS & HTTPS CONFIGURATION (Production)
# =============================================================================

# SSL/TLS Settings
SSL_ENABLED=false            # Включить для production с HTTPS
SSL_CERT_PATH=./nginx/ssl/cert.pem
SSL_KEY_PATH=./nginx/ssl/key.pem
SSL_REDIRECT_HTTP_TO_HTTPS=true
SSL_HSTS_ENABLED=true

# =============================================================================
# CONTAINER RESOURCE LIMITS (Docker)
# =============================================================================

# Docker Resource Limits
API_MEMORY_LIMIT=2g
API_CPU_LIMIT=2.0
DB_MEMORY_LIMIT=4g
DB_CPU_LIMIT=2.0  
REDIS_MEMORY_LIMIT=1g
NGINX_MEMORY_LIMIT=512m

# Container Health Checks
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_INTERVAL=30s

# =============================================================================
# TIMEZONE & LOCALIZATION
# =============================================================================

# Timezone Configuration
TZ=Europe/Moscow
LOCALE=ru_RU.UTF-8

# Date/Time Formats
DATETIME_FORMAT=%Y-%m-%d %H:%M:%S
DATE_FORMAT=%Y-%m-%d

# =============================================================================
# DEVELOPMENT SETTINGS (отключить в production!)
# =============================================================================

# Development Features (ТОЛЬКО для development!)
# ENVIRONMENT=development
# DEBUG=true
# API_RELOAD=true
# PYTEST_ENABLED=true
# ENABLE_HOT_RELOAD=true

# =============================================================================
# CONTACT & SUPPORT INFORMATION
# =============================================================================

CONTACT_EMAIL=support@yourdomain.com
SUPPORT_URL=https://yourdomain.com/support
DOCUMENTATION_URL=https://docs.yourdomain.com